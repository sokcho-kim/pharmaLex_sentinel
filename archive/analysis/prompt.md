# OCR 단위/기호 정규화 검증 리포트 지시문

## 역할
너는 **의료 데이터 정규화 검증 전문가** 역할을 한다.  
입력으로 제공되는 `ocr_unit_anomalies_scan.csv`는 OCR된 보험심사 문서에서 단위/기호 깨짐을 탐지한 결과이다.  

---

## 작업 지침

### 1. 분류 기준
CSV 내 각 행에 대해, 다음 기준에 따라 **자동 교정 가능 / 사람 검토 필요**로 구분한다.

- ✅ **자동 교정 가능**
  - `ug`, `mcg` → `㎍` (무조건)
  - 숫자 + `'g'` 단위인데 값이 1~100 사이이고, 주변에 `정/주/시럽/이식제/캡슐/패치` 등 제형 단어가 포함되면 `㎍`로 교정 확정

- ⚠️ **사람 검토 필요**
  - 숫자 + `'g'` 단위이지만 100 이상인 경우 (실제 g일 가능성 높음)
  - 숫자 + `'g'` 단위인데 제형 단어 맥락이 없는 경우
  - `μ` 단독 등장 → 맥락 따라 `㎍` 또는 `㎖` 가능
  - `a-`, `b-`, `g-` 등이 α, β, γ로 잘못 인식됐을 가능성
  - 그 외 CSV에서 classification이 `review_micro_as_g`, `suspect_greek_broken`, `suspect_mu_alone`

---

### 2. 출력 형식

1. **자동 교정 목록**
   - 표 형태: `[원본 match] | [교정 제안] | [사유]`
   - 자동 교정된 총 건수 포함

2. **사람 검토 필요 목록**
   - 표 형태: `[원본 match] | [제안 교정] | [사유] | [context(문맥 일부)]`
   - 검토 필요한 총 건수 포함

3. **일괄 교정 규칙**
   - 자동화 가능한 규칙을 목록으로 정리
   - 예: `"ug" → "㎍"`, `"mcg" → "㎍"`, `"1~100g + 제형 단어" → "㎍"`

4. **최종 매핑 JSON 사전**
   - JSON 형식으로 자동 교정 규칙을 정리
   - 예:
     ```json
     {
       "ug": "㎍",
       "mcg": "㎍",
       " g": " ㎍"
     }
     ```

---

## 출력 예시 (샘플)

### ✅ 자동 교정 목록
| 원본 match | 교정 제안 | 사유 |
|------------|-----------|------|
| 20mcg      | 20㎍      | ASCII mcg → 기호 ㎍ |
| 5ug        | 5㎍       | ASCII ug → 기호 ㎍ |
| 1g         | 1㎍       | 소량 g, 제형 단어 있음 |

### ⚠️ 사람 검토 필요 목록
| 원본 match | 교정 제안 | 사유 | context |
|------------|-----------|------|---------|
| μ          | ㎍/㎖?    | μ 단독 검출 → 맥락 검토 필요 | "... μ ..." |
| 40g        | 40㎍(검토) | 소량 g이나 제형 단어 없음 | "... 40g ..." |

### 📌 일괄 교정 규칙
- `"ug" → "㎍"`
- `"mcg" → "㎍"`
- `"1~100g + 제형 단어" → "㎍"`

### 🗂 최종 매핑 JSON
```json
{
  "ug": "㎍",
  "mcg": "㎍",
  " g": " ㎍"
}
